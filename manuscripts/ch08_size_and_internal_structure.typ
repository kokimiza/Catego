#import "@preview/theorion:0.4.1": *
#import cosmos.clouds: *
#show: show-theorion

これまでの章では、圏論の基本概念を「中身を見ない」という制約のもとで構築してきた。しかし、数学的に厳密な議論を進めるためには、圏自体の「大きさ」や「内部構造」について考察する必要がある。本章では、集合論的な基礎に立ち返り、圏の分類と階層構造を明らかにする。

== 圏の「大きさ」という問題

圏論を集合論の上に構築する際、最初に直面するのは「すべての集合の集まり」が集合ではないという Russell のパラドックスに類似した問題である。#footnote[Russell のパラドックス（1901年）は、「自分自身を要素として含まない集合の集合」を考えることで生じる矛盾である。これにより、素朴集合論では「すべての集合の集まり」を集合として扱うことができないことが判明した。]

圏 $bold("Set")$（すべての集合を対象とし、写像を射とする圏）を考えてみよう。この圏の対象の「集まり」$op("ob")(bold("Set"))$ は、すべての集合を含むため、それ自体は集合ではなく *真のクラス* (proper class) となる。

#important-box(title: "基礎付けの必要性")[
  圏論が数学の基礎言語として機能するためには、どの圏が「安全に扱える」かを明確に区別する必要がある。これが圏の「大きさ」による分類の動機である。
]

== 小さい圏と局所小さい圏

#definition(title: "小さい圏 (Small Category)")[
  圏 $bold(C)$ が *小さい* とは、その対象の集まり $op("ob")(bold(C))$ が集合であり、かつ任意の対象 $X, Y$ に対して Hom 集合 $op("hom")(X, Y)$ が集合であることをいう。
]

#definition(title: "局所小さい圏 (Locally Small Category)")[
  圏 $bold(C)$ が *局所小さい* とは、任意の対象 $X, Y$ に対して Hom 集合 $op("hom")(X, Y)$ が集合であることをいう。ただし、対象の集まり $op("ob")(bold(C))$ は真のクラスであってもよい。
]

#example(title: "大きさの分類例")[
  - *小さい圏*: 有限群 $G$ を一つの対象とする圏、有限集合のみからなる圏
  - *局所小さい圏*: $bold("Set")$, $bold("Grp")$, $bold("Top")$ など
  - *大きい圏*: 「すべての圏を対象とする圏」（各 Hom クラスが真のクラスになる）
]

=== なぜ「局所小さい」で十分なのか？

実用的な圏論の大部分は、局所小さい圏の枠内で展開される。これは、米田の補題（第5章）や随伴関手（第7章）などの基本定理が、Hom 集合の構造にのみ依存し、対象の集まりの大きさには依存しないためである。

#remark[
  局所小さい圏では、任意の二つの対象間の射の集合が「数え上げ可能」であるため、関手や自然変換の定義において集合論的な困難が生じない。一方、対象の集まりが真のクラスであることは、圏の「豊かさ」を保証し、十分な構造を持つことを可能にする。
]

== 部分圏：構造の継承と制限

圏の「部分」を取り出す操作は、代数における部分群や位相空間における部分空間の概念を一般化したものである。

#definition(title: "部分圏 (Subcategory)")[
  圏 $bold(D)$ が圏 $bold(C)$ の *部分圏* であるとは、次の条件を満たすことである：
  1. $op("ob")(bold(D)) subset.eq op("ob")(bold(C))$
  2. 任意の $X, Y in op("ob")(bold(D))$ に対し、$op("hom")_bold(D)(X, Y) subset.eq op("hom")_bold(C)(X, Y)$
  3. $bold(D)$ における射の合成と恒等射は、$bold(C)$ におけるものと一致する
]

#definition(title: "充満部分圏 (Full Subcategory)")[
  部分圏 $bold(D) subset bold(C)$ が *充満* であるとは、任意の $X, Y in op("ob")(bold(D))$ に対して
  $ op("hom")_bold(D)(X, Y) = op("hom")_bold(C)(X, Y) $
  が成り立つことをいう。
]

#tip-box(title: "充満部分圏の意義")[
  充満部分圏は、元の圏から「対象を間引いただけ」の構造である。射の構造は完全に保持されるため、元の圏の性質の多くが充満部分圏にも継承される。例えば、有限群の圏 $bold("FinGrp")$ は群の圏 $bold("Grp")$ の充満部分圏であり、群論の基本的な性質はすべて有限群でも成り立つ。
]

== 圏 Cat の構造と性質

圏を対象とし、関手を射とする圏 $bold("Cat")$ は、圏論における最も重要な「メタ圏」である。

#definition(title: "圏の圏 Cat")[
  圏 $bold("Cat")$ とは、次のデータからなる圏である：
  - 対象：すべての小さい圏
  - 射：関手 $F: bold(C) -> bold(D)$
  - 合成：関手の合成
  - 恒等射：恒等関手 $1_bold(C)$
]

#remark[
  $bold("Cat")$ の定義において「小さい圏」に制限するのは、集合論的な困難を回避するためである。局所小さい圏まで含めると、$bold("Cat")$ 自体が真のクラスとなり、通常の圏論の枠組みを超えてしまう。
]

=== Cat における特殊な構造

$bold("Cat")$ は単なる圏ではなく、豊かな内部構造を持つ。

#theorem(title: "Cat の直積")[
  $bold("Cat")$ には直積が存在する。二つの圏 $bold(C), bold(D)$ の直積 $bold(C) times bold(D)$ は、次のように定義される：
  - 対象：$(X, Y)$ ただし $X in bold(C), Y in bold(D)$
  - 射：$(f, g): (X, Y) -> (X', Y')$ ただし $f: X -> X' in bold(C), g: Y -> Y' in bold(D)$
]

#theorem(title: "Cat の指数対象")[
  $bold("Cat")$ には指数対象（関手圏）が存在する。圏 $bold(C), bold(D)$ に対し、$bold(D)^bold(C)$ は次のように定義される：
  - 対象：関手 $F: bold(C) -> bold(D)$
  - 射：自然変換 $alpha: F -> G$
]

これらの構造により、$bold("Cat")$ は *直積閉圏* (Cartesian Closed Category) となる。#footnote[直積閉圏は、直積と指数対象を持つ圏であり、型理論や計算機科学において重要な役割を果たす。]

== 大きい圏の扱い：宇宙の階層

実際の数学では、$bold("Set")$ や $bold("Cat")$ のような「大きい圏」を扱う必要がある。これを厳密に行うには、Grothendieck 宇宙などの集合論的な道具が必要となる。

#definition(title: "Grothendieck 宇宙")[
  集合 $U$ が *Grothendieck 宇宙* であるとは、次の条件を満たすことである：
  1. $x in y in U$ ならば $x in U$
  2. $x, y in U$ ならば $\{x, y\} in U$
  3. $x in U$ ならば $cal(P)(x) in U$（冪集合）
  4. $I in U$ かつ各 $i in I$ に対し $x_i in U$ ならば $union.big_(i in I) x_i in U$
]

#important-box(title: "宇宙による階層化")[
  Grothendieck 宇宙 $U$ を固定すると、$U$ の要素である集合を「$U$-小さい」と呼び、これらを対象とする圏を「$U$-小さい圏」と定義できる。これにより、圏の大きさの問題を系統的に解決できる。

  例えば、通常の集合論における「集合」を $U_0$-小さい集合とし、「すべての $U_0$-小さい集合の圏」を $U_1$-小さい圏として扱うことで、無限の階層を構築できる。
]

== 内部構造の探求：豊穣圏への扉

本章の最後に、圏の「内部構造」をより深く探求する方向性を示唆しておこう。

通常の圏では、Hom 集合 $op("hom")(X, Y)$ は単なる集合である。しかし、これを他の圏の対象（例えば位相空間、順序集合、アーベル群）に置き換えることで、より豊かな構造を持つ *豊穣圏* (Enriched Category) が得られる。

#example(title: "豊穣圏の例")[
  - *位相豊穣圏*: Hom 集合に位相を入れ、合成写像が連続になるようにした圏
  - *順序豊穣圏*: Hom 集合が順序集合（または前順序集合）である圏
  - *アーベル豊穣圏*: Hom 集合がアーベル群であり、合成が双線形である圏
]

これらの構造は、第11章「モノイダル圏と豊穣圏」で詳しく扱われる。

#remark(title: "構造の階層性")[
  圏論の美しさの一つは、「圏」という概念自体が階層的に拡張可能であることにある。小さい圏から始まり、大きい圏、豊穣圏、さらには高次圏（第13章）へと、構造の複雑さを段階的に増していくことができる。各段階で新たな数学的現象が現れ、より深い理解が得られる。
]